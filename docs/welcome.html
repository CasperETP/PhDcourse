<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>The data-wrangling and omics course for R novices</title>
  <meta name="description" content="A tutorial on how to do data-wrangling and analysing omics data" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="The data-wrangling and omics course for R novices" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A tutorial on how to do data-wrangling and analysing omics data" />
  <meta name="github-repo" content="openscapes/series" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The data-wrangling and omics course for R novices" />
  
  <meta name="twitter:description" content="A tutorial on how to do data-wrangling and analysing omics data" />
  

<meta name="author" content="Casper-Emil Tingskov Pedersen and Jonathan Thorsen" />


<meta name="date" content="2023-10-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  


<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="Data_wrangling.html"><a href="#welcome"><i class="fa fa-check"></i><b>1</b> Welcome to this course</a>
<ul>
<li class="chapter" data-level="1.1" data-path="Data_wrangling.html"><a href="#packages-required"><i class="fa fa-check"></i><b>1.1</b> Packages required</a></li>
<li class="chapter" data-level="1.2" data-path="Data_wrangling.html"><a href="#using-functions-of-the-penguins-dataset"><i class="fa fa-check"></i><b>1.2</b> Using functions of the penguins dataset</a></li>
<li class="chapter" data-level="1.3" data-path="Data_wrangling.html"><a href="#load-in-a-dataset-from-the-internet"><i class="fa fa-check"></i><b>1.3</b> Load in a dataset from the internet</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="Data_wrangling.html"><a href="#comma-separated-csv"><i class="fa fa-check"></i><b>1.3.1</b> comma separated (csv)</a></li>
<li class="chapter" data-level="1.3.2" data-path="Data_wrangling.html"><a href="#table-can-be-anything-that-has-table-structure"><i class="fa fa-check"></i><b>1.3.2</b> table (can be anything that has table structure)</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="Data_wrangling.html"><a href="#data-types-in-r"><i class="fa fa-check"></i><b>1.4</b> Data types in R</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The data-wrangling and omics course for R novices</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">The data-wrangling and omics course for R novices</h1>
<p class="author"><em>Casper-Emil Tingskov Pedersen and Jonathan Thorsen</em></p>
<p class="date"><em>2023-10-30</em></p>
</div>
<div id="welcome" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> Welcome to this course<a href="#welcome" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This course will introduce you to data-wrangling and analysis of omics data.
We start out by building an intuition for working with data in R/Rstudio and then plot our results.</p>
<p>The best way to learn is to follow along with your own laptop, but all are welcome. The idea with this course is also that you can do your own selv-paced learning by going back to themes that are harder.</p>
<p>We’ll spend half the time with the lectures on the basic of R and data wrangling and half the time for you to try out wrangling yourself. You can also try some of the things you learn from the exercises on your own data.</p>
<p>Before you begin, be sure you are all set up: see the prerequisites in #overview.</p>
<p>Breakdown for the course:</p>
<hr />
<p><strong>Course schedule:</strong></p>
<table>
<colgroup>
<col width="10%" />
<col width="49%" />
<col width="39%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Time</th>
<th align="left">Day1</th>
<th align="left">Day2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">9-10:30</td>
<td align="left">Data-Wrangling, an introduction</td>
<td align="left">Modelling introduction and omics</td>
</tr>
<tr class="even">
<td align="left">10:35-12</td>
<td align="left">Get your hands dirty with data-wrangling</td>
<td align="left">Your own catwalk with omics</td>
</tr>
<tr class="odd">
<td align="left">13-14.30</td>
<td align="left">GGplot2, an introduction</td>
<td align="left">Machine learning introduction</td>
</tr>
<tr class="even">
<td align="left">14.35-16</td>
<td align="left">Plotting visually please plots</td>
<td align="left">Omics and machine learning</td>
</tr>
</tbody>
</table>
<table style="width:7%;">
<colgroup>
<col width="6%" />
</colgroup>
<tbody>
<tr class="odd">
<td>This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</td>
</tr>
<tr class="even">
<td><!--chapter:end:index.Rmd--></td>
</tr>
<tr class="odd">
<td># Course overview {#overview}</td>
</tr>
<tr class="even">
<td>Yihaa you are commited to learning relevant coding using R. The world is now ready to become your oister.</td>
</tr>
<tr class="odd">
<td>## What can you expect</td>
</tr>
<tr class="even">
<td>In this course you will learn how to code in R and it will be fun. You will learn efficient code and workflows that can be used in your own research and for various kinds of data, including all types of omics data. This is really powerful and will lead you to become a better scientist.</td>
</tr>
<tr class="odd">
<td>## General learning outcomes</td>
</tr>
<tr class="even">
<td>-how to code in R.</td>
</tr>
<tr class="odd">
<td>-how to THINK about data.</td>
</tr>
<tr class="even">
<td>-how to think about data separately from your research questions.</td>
</tr>
<tr class="odd">
<td>-how and why to tidy data and analyze tidy data.</td>
</tr>
<tr class="even">
<td>-how to increase efficiency in your research.</td>
</tr>
<tr class="odd">
<td>## Our workflow plus the Tidy data workflow</td>
</tr>
<tr class="even">
<td>We will turning our data tidy and how to use a tidyverse suite of tools to work with tidy data.<br />
It has been developed by <a href="https://hadley.nz/">Hadley Wickham</a> and his team, please visit his website if you are interested in learning more.</td>
</tr>
<tr class="odd">
<td><img src="https://ohi-science.org/data-science-training/img/r4ds_data-science.png" /></td>
</tr>
<tr class="even">
<td>We will be focusing on a combination of tools:</td>
</tr>
<tr class="odd">
<td><u>Basic tools:</u> -<strong>str/glimpse</strong>: Look at data</td>
</tr>
<tr class="even">
<td><u>Tidytools:</u></td>
</tr>
<tr class="odd">
<td>-<strong>Tidy</strong>: <code>tidyr</code> to organize rows of data into unique values.</td>
</tr>
<tr class="even">
<td>-<strong>Transform</strong>: <code>dplyr</code> to manipulate/wrangle data based on subsetting by rows or columns, sorting and joining.</td>
</tr>
<tr class="odd">
<td>-<strong>Visualize</strong>: <code>ggplot2</code> static plots, using grammar of graphics principles</td>
</tr>
<tr class="even">
<td>This is essential - Instead of building your analyses around the format your data are in, take deliberate steps to make your data tidy. When your data are tidy, you can use a growing suite of powerful analytical and visualization tools instead of inventing home-grown ways to accommodate your data. This will save you time since you aren’t reinventing the wheel, and will make your work more clear and understandable to your collaborators (most importantly, Future You).</td>
</tr>
<tr class="odd">
<td>## Working with data that is not your own</td>
</tr>
<tr class="even">
<td>One of the most important things you will learn is how to think about data separately from your own research context. Said in another way, you’ll learn to distinguish your data questions from your research questions. Here, we are focusing on data questions, and we will use data that is not specific to your research.</td>
</tr>
<tr class="odd">
<td>We will be using several different data sets throughout this training, and will help you see the patterns and parallels to your own data, which will ultimately help you in your research.</td>
</tr>
<tr class="even">
<td>## Goals of this course</td>
</tr>
<tr class="odd">
<td>The goal of this course today is to equip you with the tools to take a (your) dataset and do the following:</td>
</tr>
<tr class="even">
<td>1. Import data to R and understand the structure of your data
2. Look at it using summaries and descriptive statistics
3. Engineer features relevant for your research
4. Impute missing data
5. To do transformation and understand what that means
6. Plot the data using visually appealing and publish-ready figures</td>
</tr>
<tr class="odd">
<td>## Prerequisites</td>
</tr>
<tr class="even">
<td>A few things need to be checked before we start. First, we assume that you have either <a href="https://cloud.r-project.org/">R</a> or <a href="https://www.rstudio.com/products/rstudio/download/">RStudio</a> installed.</td>
</tr>
<tr class="odd">
<td>Also, if not already installed, please install the following packages: c(“dplyr”,“tidyverse”,“broom”,““)</td>
</tr>
<tr class="even">
<td>## Credit</td>
</tr>
<tr class="odd">
<td>This material builds from (and is directly copied from) a lot of fantastic materials developed by others in the open data science community. In particular, it pulls from the following resources, which are highly recommended for further learning and as resources later on. Specific lessons will also cite more resources.</td>
</tr>
<tr class="even">
<td><a href="https://ohi-science.org/data-science-training/overview.html">OHI data science training</a></td>
</tr>
<tr class="odd">
<td><a href="https://moderndive.netlify.app/1-getting-started">Modern dive</a></td>
</tr>
<tr class="even">
<td><!--chapter:end:Overview.Rmd--></td>
</tr>
<tr class="odd">
<td># Super quick intro to coding and data in R {#dataintro}</td>
</tr>
<tr class="even">
<td>## Coding/programming in R</td>
</tr>
<tr class="odd">
<td>Now that you’re set up with R and RStudio, you are probably asking yourself, “OK. Now how do I use R?”. The first thing to note is that unlike other statistical software programs like Excel, SPSS, or Minitab that provide point-and-click interfaces, R is an interpreted language. This means you have to type in commands written in R code. In other words, you have to code/program in R. Note that we’ll use the terms “coding” and “programming” interchangeably throughout this course.</td>
</tr>
<tr class="even">
<td>While it is not required to be a seasoned coder/computer programmer to use R, there is still a set of basic programming concepts that new R users need to understand. Consequently, while this course is not focused on learning programming, you will still learn just enough of these basic programming concepts needed to explore and analyze data effectively.</td>
</tr>
<tr class="odd">
<td>## Basic terminology in R</td>
</tr>
<tr class="even">
<td>We now introduce some basic programming concepts and terminology. Instead of asking you to memorize all these concepts and terminology right now, we’ll guide you so that you’ll “learn by doing.” To help you learn, we will always use a different font to distinguish regular text from computer_code. Also we will go through a tiny bit of information and then ask you do a similar task on your computer.</td>
</tr>
<tr class="odd">
<td><img src="https://www.analyticsvidhya.com/wp-content/uploads/2016/02/rstudio.jpg" /></td>
</tr>
<tr class="even">
<td>On this plot you can see the overview of Rstudio. This contains the following elements:</td>
</tr>
<tr class="odd">
<td>Console pane: where you enter in commands.</td>
</tr>
<tr class="even">
<td>R script: Where you store your commands often in a text file.</td>
</tr>
<tr class="odd">
<td>R environment: What objects are registered/loaded in the environment (we will get back to that).</td>
</tr>
<tr class="even">
<td>Graphical output: Where you can see figures that is produced by commands in the console.</td>
</tr>
<tr class="odd">
<td><img src="https://sydney-informatics-hub.github.io/lessonbmc/fig/Rvariablesdata.jpg" /></td>
</tr>
<tr class="even">
<td>This figure shows some of the more important data types in R and how they relate to storing data in R.
It seems simple when set up like this, but when you are coding and you need to find an error this figure is
a good place to start.</td>
</tr>
<tr class="odd">
<td>Vectors can be created by using the <code>c()</code> function in R. The c stands for concatenate.
for example the following command creates a vector of integers 1,2,3,4:
<code>my_vector &lt;- c(1,2,3,4)</code></td>
</tr>
<tr class="even">
<td>Matrices can be created by using the <code>matrix()</code> function in R. Matrices are great for doing calculations
incredibly fast BUT they can only contain one type of data unlike dataframes. For example the following command creates a matrix with the same four integers 1,2,3,4:
<code>my_matrix &lt;- matrix(c(1,2,3,4))</code> you can also rearrange the matrix so that it has two columns instead of one:
<code>my_matrix &lt;- matrix(c(1,2,3,4),ncol=2)</code>
you can look at your matrix by typing <code>my_matrix</code> in the console.</td>
</tr>
<tr class="odd">
<td>Data frames is a way to store data containing both strings, integers, factors together. They are rectangular spreadsheets. Typically you have a dataset where the rows correspond tot eh observations/samples and the columns correspond to the variables that describe the observations. And this is the typical format when we analyse data. We can create a data frame in R with mixed data like this:
<code>my_df &lt;- data.frame(int = c(1,2,3,4),names = c("Villy","Søren","Karl","Benny"))</code>.</td>
</tr>
<tr class="even">
<td><img src="https://help.displayr.com/hc/article_attachments/6719912862607" /></td>
</tr>
<tr class="odd">
<td><em>Conditionals:</em></td>
</tr>
<tr class="even">
<td>Often we subset our data using conditions, e.g. we only want samples of our data frame that has a value in column 3 that is larger than X. Do this kind of subsetting, we use <em>conditionals</em>.</td>
</tr>
<tr class="odd">
<td>For example, using the data frame from before, we can restrict rows to those that have a integer value larger than
2 like this:
<code>my_df[my_df$int &gt; 2,]</code> This will capture the last two rows of the data. Notice the comma, which is essential
when indexing dataframes: everything before the comma is subsetting on rows while after the comma is for subsetting columns. We can also subset using equality using == (and NOT =, which is used for assignment). Here is an example using equality: <code>my_df[my_df$names == "Karl",]</code>.
The final example of something similar to but not identical is a binary operator %in% which is not listed in the figure above but still very useful. This weirdly looking %in% is describing a operator (which we will get back to and use later) which can search for overlaps e.g. in R:
<code>my_df[my_df$names %in% c("Karl","Villy"),]</code> See here that we find the overlap between names in my_df and the provided vector and only showing the rows of the data frame where there is an overlap.</td>
</tr>
<tr class="even">
<td><img src="https://media.geeksforgeeks.org/wp-content/uploads/20200411225124/f114-300x158.png" /></td>
</tr>
<tr class="odd">
<td>Functions, also called commands: Functions perform tasks in R. They take in inputs called arguments and return outputs. You can either manually specify a function’s arguments or use the function’s default values.
For example, the function <code>seq()</code> in R generates a sequence of numbers. If you just run <code>seq()</code> it will return the value 1. That doesn’t seem very useful! This is because the default arguments are set as <code>seq(from = 1, to = 1)</code>. Thus, if you don’t pass in different values for from and to to change this behavior, R just assumes all you want is the number 1. You can change the argument values by updating the values after the = sign. If we try out <code>seq(from = 2, to = 5)</code> we get the result 2 3 4 5 that we might expect.</td>
</tr>
<tr class="even">
<td>This list is by no means an exhaustive list of all the programming concepts and terminology needed to become a savvy R user; such a list would be so large it wouldn’t be very useful, especially for novices. Rather, we feel this is a minimally viable list of programming concepts and terminology you need to know before getting started. We feel that you can learn the rest as you go. Remember that your mastery of all of these concepts and terminology will build as you practice more and more.</td>
</tr>
<tr class="odd">
<td>### Your turn {#exercise1}</td>
</tr>
<tr class="even">
<td>Exercise 1.</td>
</tr>
<tr class="odd">
<td>1. Create a dataframe with the following information (you pick the dataframe name):
two column dataframe. One with the names:
<code>c("Villy","Søren","Karl","Benny","Siri")</code> and One with the following grades:<code>c(100,20,40,30,60)</code>.</td>
</tr>
<tr class="even">
<td>2. Use the <code>mean()</code> function to calculate the mean for passing grades (&gt;30). There are many ways to do this
but a hint is that we only need to run one command. you can always see more information about the function by writing
<code>?mean</code> in your console.</td>
</tr>
<tr class="odd">
<td>## Error messages</td>
</tr>
<tr class="even">
<td>One thing that intimidates new R and RStudio users is how it reports errors, warnings, and messages. R reports errors, warnings, and messages in a glaring red font, which makes it seem like it is scolding you. However, seeing red text in the console is not always bad.</td>
</tr>
<tr class="odd">
<td>R will show red text in the console pane in three different situations:</td>
</tr>
<tr class="even">
<td><img src="https://media.wired.com/photos/593257829be5e55af6c24476/master/w_2240,c_limit/trafficlight-inline.jpg" /></td>
</tr>
<tr class="odd">
<td>If the text starts with “Error”, figure out what’s causing it. Think of errors as a red traffic light: something is wrong!
If the text starts with “Warning”, figure out if it’s something to worry about. For instance, if you get a warning about missing values in a scatterplot and you know there are missing values, you’re fine. If that’s surprising, look at your data and see what’s missing. Think of warnings as a yellow traffic light: everything is working fine, but watch out/pay attention.
Otherwise, the text is just a message. Read it, wave back at R, and thank it for talking to you. Think of messages as a green traffic light: everything is working fine and keep on going!</td>
</tr>
<tr class="even">
<td>## Coding tips and tricks</td>
</tr>
<tr class="odd">
<td>Learning to code/program is quite similar to learning a foreign language. It can be daunting and frustrating at first. Such frustrations are common and it is normal to feel discouraged as you learn. However, just as with learning a foreign language, if you put in the effort and are not afraid to make mistakes, anybody can learn and improve.</td>
</tr>
<tr class="even">
<td>Here are a few useful tips to keep in mind as you learn to program:</td>
</tr>
<tr class="odd">
<td><img src="https://cdn.vox-cdn.com/thumbor/BKeBuV-Agjw4SaAA8Mbm1ptN7e0=/0x0:4032x3024/620x465/filters:focal(1693x1446:2337x2090):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/59740845/sip_of_joy.17.jpg" /></td>
</tr>
<tr class="even">
<td><em>Remember that computers are not actually that smart</em>: You may think your computer or smartphone is “smart,” but really people spent a lot of time and energy designing them to appear “smart.” In reality, you have to tell a computer everything it needs to do. Furthermore, the instructions you give your computer can’t have any mistakes in them, nor can they be ambiguous in any way.</td>
</tr>
<tr class="odd">
<td><em>Take the “copy, paste, and tweak” approach</em>: Especially when you learn your first programming language or you need to understand particularly complicated code, it is often much easier to take existing code that you know works and modify it to suit your ends. This is as opposed to trying to type out the code from scratch. We call this the “copy, paste, and tweak” approach. So early on, we suggest not trying to write code from memory, but rather take existing examples we have provided you, then copy, paste, and tweak them to suit your goals. After you start feeling more confident, you can slowly move away from this approach and write code from scratch. Think of the “copy, paste, and tweak” approach as training wheels for a child learning to ride a bike. After getting comfortable, they won’t need them anymore.</td>
</tr>
<tr class="even">
<td><em>The best way to learn to code is by doing:</em> Rather than learning to code for its own sake, we find that learning to code goes much smoother when you have a goal in mind or when you are working on a particular project, like analyzing data that you are interested in and that is important to you.
Practice is key!</td>
</tr>
<tr class="odd">
<td>## Install and load package {#installpackages}</td>
</tr>
<tr class="even">
<td>So we alluded to that the environment contains many objects and some of these objects come from packages. Packages
in R is precalculated functions and useful tools to work with your data. Therefore, embrace packages and get familiar with some of them. Some of the more important ones we will use in this course are:
<code>tidyverse</code> and <code>dplyr</code> for data massaging and wrangling and <code>ggplot 2</code> for visualizations.</td>
</tr>
<tr class="odd">
<td><img src="https://moderndive.netlify.app/images/shutterstock/R_vs_R_packages.png" /></td>
</tr>
<tr class="even">
<td>So R is like a new mobile phone: while it has a certain amount of features when you use it for the first time, it doesn’t have everything. R packages are like the apps you can download onto your phone from Apple’s App Store or Android’s Google Play.</td>
</tr>
<tr class="odd">
<td>Like an app on your smartphone, you need to install it first and the open it.</td>
</tr>
<tr class="even">
<td>if you try to load a package that is not installed you get an error for instance</td>
</tr>
<tr class="odd">
<td><code>library(tidyverse)</code> and if not you know that tidyverse is installed</td>
</tr>
<tr class="even">
<td>To install the tidyverse package do the following:</td>
</tr>
<tr class="odd">
<td><code>install.packages("tidyverse")</code></td>
</tr>
<tr class="even">
<td>and to load it subsequently, write <code>library(tidyverse)</code>.</td>
</tr>
<tr class="odd">
<td>Now install <code>broom</code> , <code>tidyverse</code> and <code>dplyr</code>
using this approach</td>
</tr>
<tr class="even">
<td><!--chapter:end:basic_intro_data_in_R.Rmd--></td>
</tr>
<tr class="odd">
<td># Data wrangling and tidy data {#datawrangling}</td>
</tr>
<tr class="even">
<td><img src="https://andreashandel.github.io/MADAcourse/media/cartoonscrubdata.jpg" /></td>
</tr>
</tbody>
</table>
<div id="packages-required" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Packages required<a href="#packages-required" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following packages are required. If you need to go back and check how installing a package is done see the section 3.5(#installpackages).</p>
<p>library(dplyr).<br />
library(ggplot2).<br />
library(readr).<br />
library(tidyr).<br />
library(broom).<br />
library(palmerpenguins).</p>
<p>This chapter will introduce you to data wrangling with an emphasis on the <code>dplyr</code> package along with other helpful functions. You will see how powerful wrangling can be and how it can be like a magic wand to transform data into your specific needs. The key functions include but are not limited to:</p>
<ol style="list-style-type: decimal">
<li>The overarching function which makes us able to combine functions and subsetting is <strong>the pipe</strong>. And what is a pipe? Pipes are a neat way to tie together several dataframes/functions into a chain of actions. It makes coding easier to understand and is therefore a better style of coding. It looks like this <code>%&gt;%</code>. For instance taking the mean of the first two rows of the <code>my_df</code> dataframe can be done like so:
<code>my_df[1:2,"Grades"] %&gt;% mean</code>. Learning to use the pipe to your advantage is learning to code. Luckily it all comes naturally when working with the following functions:</li>
</ol>
<p>1.<code>left_join()</code> merge two data frames together using a key column. This function (along with its cousin functions <code>right_join()</code> and <code>join()</code> etc.) is the bread and butter of working with many data types that needs to be merged and analysed.</p>
<ol style="list-style-type: decimal">
<li><p><code>mutate()</code> construct/reconstruct a column using a newly defined column name. This function is useful to generate a new columns that modify existing ones often using a conditional to do so.</p></li>
<li><p><code>count()</code> counts the n of each unique value in a column. Usefull to combine with mutate to see the counts of the newly constructed column.</p></li>
<li><p><code>arrange()</code> reorder the rows of a dataframe. For example, sort the rows of a dataset in descending order of the column height.</p></li>
<li><p><code>filter()</code> the rows of a dataframe based on a filter, e.g. thresholds. It is similar to the example shown in the introduction, where we used old school filtering on my_df dataframe <code>my_df[my_df$names %in% c("Karl","Villy"),]</code>. Using the filter function and pipes you can do it like this: <code>my_df %&gt;% filter(names %in% c("Karl","Villy"))</code>.</p></li>
<li><p><code>summarise()</code> a dataframe using one or more of its columns/variables with a summary statistic. Such examples could be the median or the mean and an example look like this: <code>my_df %&gt;% summarise(mean = mean(Grades))</code>. This function can be very powerful when combined with the <code>group_by</code> function.</p></li>
<li><p><code>group_by()</code> is a dplyr way of grouping rows, it is a way to assign different rows to a group and do statistical reporting on every specific group in the data set. An example require us to add a third column to <code>my_df</code> like this:
<code>my_df &lt;- my_df %&gt;% mutate(gender = c("boy","boy","boy","boy","girl"))</code>. Now using this new <code>my_df</code> we can <code>group_by</code> on the gender column and calculate the median on this group:</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>my_df <span class="sc">%&gt;%</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">median</span>(Grades)) </span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##   gender `median(Grades)`
##   &lt;chr&gt;             &lt;dbl&gt;
## 1 boy                  35
## 2 girl                 60</code></pre>
</div>
<div id="using-functions-of-the-penguins-dataset" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Using functions of the penguins dataset<a href="#using-functions-of-the-penguins-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="load-in-a-dataset-from-the-internet" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Load in a dataset from the internet<a href="#load-in-a-dataset-from-the-internet" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Open this link in a new tab by copy-pasting and save it to your computer using right-click (<a href="https://raw.githubusercontent.com/zief0002/miniature-garbanzo/main/data/gapminder.csv" class="uri">https://raw.githubusercontent.com/zief0002/miniature-garbanzo/main/data/gapminder.csv</a>).
Save it as “gapminder2017”.</p>
<div id="comma-separated-csv" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> comma separated (csv)<a href="#comma-separated-csv" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>try read it in using read csv, the file ending is automatically put on there, so even though you did not name it gapminder2017.csv, that is the name it will get.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>gapminder2017 <span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;~/241023_phdcourse/data/gapminder2017.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="table-can-be-anything-that-has-table-structure" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> table (can be anything that has table structure)<a href="#table-can-be-anything-that-has-table-structure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>read.table</p>
<p>library(gapminder)</p>
<p>now load this dataset which has all the years, install it if you havent already</p>
</div>
</div>
<div id="data-types-in-r" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Data types in R<a href="#data-types-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Even though data types is a dull subject and therefore very hard to teach properly. It does serve an important purpose. Namely that you can figure out where error messages come from and which tools to use on which data</p>
<p>Now lets show an example of this:
<code>my_df[seq(1,3),]</code></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jules32/bookdown-tutorial/edit/master/Data_wrangling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["data course.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
